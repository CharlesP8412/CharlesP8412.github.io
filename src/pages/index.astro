---
import Layout from '../layouts/Layout.astro';
import GalleryWrapper from '../components/Gallery/GalleryWrapper.astro';
import ScrollToTop from '../components/ScrollToTop';
import { getCollection } from 'astro:content';

// Load skills from content collection
const skillsEntries = await getCollection('skills');
const skills = skillsEntries.sort((a, b) => a.data.order - b.data.order);

// Load education from content collection
const educationEntries = await getCollection('education');
const educationData = await Promise.all(
  educationEntries.sort((a, b) => a.data.order - b.data.order).map(async (entry) => {
    const { Content } = await entry.render();
    return { ...entry, Content };
  }),
);
---

<Layout>
  <div id="main">
    <section id="one">
      <article>
        <header class="major">
          <h2>
            Developer, IT Admin, Communications Specialist,&nbsp;
            <br />
            Adaptable Problem Solver
          </h2>
        </header>
        <p>
          As a full-stack developer, I truly enjoy having the ability to shape and sculpt the nerves of the
          information systems we use every day.
          <br />
          I've always gravitated to electronics and technology throughout my life. From developing and experimenting
          with my home lab, to deploying and using radio and information systems in past careers, I am always keen
          to develop new skills and apply my experience and prior skills to find new solutions.
        </p>
      </article>
      <article>
        <p>
          {
            skills.map((skill) => (
              <>
                <strong>{skill.data.category}:</strong> <br />
                {skill.data.items.join(', ')} <br />
              </>
            ))
          }
        </p>
      </article>
      <article>
        <p>
          <strong>Education:</strong> <br />
          {
            educationData.map((edu) => (
              <>
                <strong>
                  {edu.data.institution} <br /> {edu.data.program} - {edu.data.date}
                </strong>{' '}
                <br />
                <edu.Content />
                <br />
              </>
            ))
          }
        </p>
      </article>
      <ul class="actions">
        <li>
          <span>
            <a
              href="https://www.canva.com/design/DAESCGsX-ak/uAxub_QKQa9qtlb_MbrZ5A/view"
              class="button"
              rel="noreferrer"
              target="_blank"
            >
              Learn More (Resume)
            </a>
          </span>
        </li>
      </ul>
    </section>

    <section id="two">
      <GalleryWrapper />

      <ul class="actions">
        <li>
          <a href="https://github.com/CharlesP8412" class="button">
            GitHub Projects
          </a>
        </li>
      </ul>
    </section>

    <section id="three">
      <article>
        <h2>Get In Touch</h2>
        <p>
          If you are looking for talent for your company or organization please don't hesitate to contact me. I
          would enjoy discussing how I can contribute to your organization.
        </p>
      </article>
      <div class="row">
        <div class="4u 12u$(small)">
          <ul class="labeled-icons">
            <li>
              <h3 class="icon fa-envelope-o">
                <span class="label">Email</span>
              </h3>
              <a href="mailto:Chuck@CPrystupa.com">Chuck@CPrystupa.com</a>
            </li>
            <li>
              <h3 class="icon fa-home">
                <span class="label">Address</span>
              </h3>
              Waterloo Region, Ontario
              <br />
              Canada
            </li>
          </ul>
        </div>
      </div>
    </section>
  </div>
  <ScrollToTop client:load />
</Layout>
